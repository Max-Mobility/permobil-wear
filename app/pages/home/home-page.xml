
<Page xmlns="http://schemas.nativescript.org/tns.xsd" 
    xmlns:Lottie="nativescript-lottie" navigatingTo="navigatingTo" actionBarHidden="true" class="permobil-page">

    <ScrollView>
        <FlexboxLayout flexDirection="column" justifyContent="space-between" padding="30 0">
            <FlexboxLayout flexDirection="row" justifyContent="center" marginTop="15" width="60%">
                <Image src="~/assets/images/permobil-logo.png" stretch="aspectFit" />
            </FlexboxLayout>
            <FlexboxLayout flexDirection="column" justifyContent="center">
              <Button text="{{ accelerometerBtnText }}" tap="{{ toggleAccelerometer }}" class="btn"/>
                <StackLayout visibility="{{ accelerometerData ? 'visible': 'collapsed' }}">
                    <!-- <Lottie:LottieView horizontalAlignment="center" verticalAlignment="middle" src="done_button.json" height="40" width="40" loop="false" autoPlay="false" loaded="{{ motionDetectedLoaded }}" visibility="{{ motionDetected ? 'visible' : 'collapsed' }}" /> -->
                    <Lottie:LottieView horizontalAlignment="center" verticalAlignment="middle" src="done_button.json" height="120" width="120" loop="false" autoPlay="false" loaded="{{ motionDetectedLoaded }}" visibility="{{ motionDetected ? 'visible' : 'collapsed' }}" />
                    <StackLayout horizontalAlignment="center" verticalAlignment="middle" height="120" width="120" visibility="{{ motionDetected ? 'collapsed' : 'visible' }}" />
                    <Label text="{{ accelerometerData }}" class="label font-small" visibility="{{ accelerometerData ? 'visible' : 'collapsed' }}" horizontalAlignment="center" textAlign="center" textWrap="true" />
                </StackLayout>
                <FlexboxLayout flexDirection="column" justifyContent="center">
                    <Button text="Heart Rate" tap="{{ startHeartRate }}" class="btn" />
                    <GridLayout height="85" rows="auto" columns="*" visibility="{{ isGettingHeartRate ? 'visible' : 'collapsed' }}">
                        <Lottie:LottieView row="0" col="0" horizontalAlignment="center" verticalAlignment="middle" src="pulse.json" height="100" width="100" loop="false" autoPlay="false" loaded="{{ heartRateLoaded }}" />
                        <Label row="0" col="0" text="{{ heartRate }}" class="heart-rate" textWrap="true" />
                    </GridLayout>
                </FlexboxLayout>
                <FlexboxLayout flexDirection="row" justifyContent="center">
                    <Button text="Scan For SmartDrives" tap="{{ onScanTap }}" class="btn" />
                </FlexboxLayout>
                <FlexboxLayout visibility="{{ connected ? 'visible' : 'collapsed' }}" flexDirection="row" justifyContent="center">
                    <Button text="Disconnect" tap="{{ onDisconnectTap }}" class="btn" />
                </FlexboxLayout>
            </FlexboxLayout>
        </FlexboxLayout>
    </ScrollView>

</Page>
