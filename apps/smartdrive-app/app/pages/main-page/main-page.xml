<Page xmlns="http://schemas.nativescript.org/tns.xsd" 
  xmlns:nac="nativescript-animated-circle" 
  xmlns:Lottie="nativescript-lottie" 
  xmlns:wol="nativescript-wear-os/packages/wear-os-layout" 
  xmlns:lv="nativescript-wear-os/packages/listview" 
  xmlns:pager="nativescript-pager" 
  xmlns:sdl="nativescript-wear-os/packages/swipe-dismiss-layout" 
  xmlns:RL="nativescript-ng-ripple/ripple-view" navigatingTo="navigatingTo" actionBarHidden="true">
  <GridLayout rows="*, *" columns="*">

    <pager:Pager orientation="vertical" height="100%" width="100%" col="0" row="0" rowSpan="2" id="pager" spacing="2%" peaking="10%" transformer="none" pagesCount="10" showNativePageIndicator="false">
      // Activate Power Assist Screen
      <pager:PagerItem>
        <GridLayout rows="32, auto, *" columns="*, auto, *" height="100%" width="100%">
          // Power Assist Circle
          <nac:AnimatedCircle rowSpan="3" colSpan="3" class="powerAssistCircle" width="100%" height="100%" animated="false" animateFrom="0" rimColor="transparent" barColor="#009ac7" clockwise="true" rimWidth="12" progress="100" />
         // SmartDrive Battery Circle
          <nac:AnimatedCircle rowSpan="3" colSpan="3" class="sdBatteryCircle" width="90%" height="90%" animated="true" animateFrom="0" rimColor="transparent" barColor="#fbff22" clockwise="true" rimWidth="7" progress="{{ smartDriveCurrentBatteryPercentage }}">
          </nac:AnimatedCircle>
         // Watch Battery Circle
          <nac:AnimatedCircle rowSpan="3" colSpan="3" class="watchBatteryCircle" width="84%" height="84%" animated="true" animateFrom="0" rimColor="transparent" barColor="#ff671f" clockwise="true" rimWidth="7" progress="{{ watchCurrentBatteryPercentage }}">
            <GridLayout rows="15, auto, auto, *, auto, auto, 15" columns="30, *, 30" class="circleDetails">
              <!-- <wol:WearOsLayout> -->
              <Label row="1" col="1" class="topValue" horizontalAlignment="center" text="{{ topValue }}" textWrap="true" />
              <Label row="2" col="1" class="topValueDescription" text="{{ topValueDescription }}" textWrap="true" />
              <Button row="3" col="1" class="powerAssistBtn" backgroundColor="#2fa52f" text="{{ powerAssistBtnText }}" tap="{{ activatePowerAssistTap }}" />
              <Label row="4" col="1" class="currentTime" text="{{ currentTime }}" textWrap="true" />
              <Label row="5" col="1" class="currentTimeMeridiem" text="{{ currentTimeMeridiem }}" textWrap="true" />
              <!-- </wol:WearOsLayout> -->
            </GridLayout>
          </nac:AnimatedCircle>
          // Battery Icon
          <Image src="~/assets/images/round_battery_full_green_24.png" rowSpan="1" col="1" height="17" stretch="aspectFit" />

        </GridLayout>
      </pager:PagerItem>
      
      // SmartDrive Battery Usage Chat
      <pager:PagerItem>
        <wol:WearOsLayout>
          <GridLayout height="100%" rows="auto, *" columns="*, auto">
            <Label row="0" colSpan="2" text="Daily SmartDrive Battery Usage" class="text-center chart-title h3" textWrap="true" />
            <Label text="" row="1" col="0" class="hr-blue" verticalAlignment="top" />
            <Label text="100" row="1" col="1" verticalAlignment="top" />
            // Battery Usage Bar Chart
            <Repeater row="1" colSpan="2" verticalAlignment="bottom" items="{{ batteryUsageData }}">
              <Repeater.itemsLayout>
                <FlexboxLayout justifyContent="space-between" flexDirection="row" />
              </Repeater.itemsLayout>
              <Repeater.itemTemplate>
                <StackLayout class="chart-stack" verticalAlignment="bottom">
                  <Label height="{{ value }}" class="battery-line" />
                  <Label text="{{ day }}" class="line-label" />
                </StackLayout>
              </Repeater.itemTemplate>
            </Repeater>
          </GridLayout>
        </wol:WearOsLayout>
      </pager:PagerItem>

      // SmartDrive Distance Traveled Chart
      <pager:PagerItem>
        <wol:WearOsLayout height="100%" width="100%">
          <GridLayout height="100%" rows="auto, auto, *" columns="*, auto">
            // Chart Title
            <Label row="0" colSpan="8" text="Daily SmartDrive Distance Traveled (MI)" class="text-center chart-title h3" textWrap="true" />
            <Label text="" row="1" col="0" class="hr-blue" textWrap="true" />
            // max value of the bar chart
            <Label text="12" row="1" col="1" textWrap="false" />
            // Bars
            <GridLayout row="2" colSpan="8" rows="*, auto" height="90" columns="*,*,*,*,*,*,*">
              // Bar Lines (need to make height dynamic, possibly use repeater to databind to a local array with battery data)
              <Label row="0" col="0" class="distance-line" height="20" textWrap="true" />
              <Label row="0" col="1" class="distance-line" height="70" textWrap="true" />
              <Label row="0" col="2" class="distance-line" height="10" textWrap="true" />
              <Label row="0" col="3" class="distance-line" height="85" textWrap="true" />
              <Label row="0" col="4" class="distance-line" height="4" textWrap="true" />
              <Label row="0" col="5" class="distance-line" height="74" textWrap="true" />
              <Label row="0" col="6" class="distance-line" height="53" textWrap="true" />
               // Bar Titles (need to make text part of the repeater layout to databind it to the local battery data)
              <Label row="1" col="0" text="T" class="line-label" />
              <Label row="1" col="1" text="W" class="line-label" />
              <Label row="1" col="2" text="Th" class="line-label" />
              <Label row="1" col="3" text="F" class="line-label" />
              <Label row="1" col="4" text="S" class="line-label" />
              <Label row="1" col="5" text="Su" class="line-label" />
              <Label row="1" col="6" text="M" class="line-label" />

            </GridLayout>

          </GridLayout>

        </wol:WearOsLayout>


      </pager:PagerItem>

      <pager:PagerItem>
        <wol:WearOsLayout height="100%" width="100%">
          <RL:Ripple row="0" rippleColor="#ddd">
            <GridLayout rows="*" columns="15, *" tap="{{ onSettingsTap }}">
              <Label col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
              <Label col="1" text="Settings" class="settings-label" textWrap="true" />
            </GridLayout>
          </RL:Ripple>
          <RL:Ripple row="1" rippleColor="#ddd">
            <GridLayout rows="*" columns="15, *" tap="{{ onLedSettingsTap }}">
              <Label col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
              <Label col="1" text="LED Settings" class="settings-label" textWrap="true" />
            </GridLayout>
          </RL:Ripple>
          <RL:Ripple row="2" rippleColor="#ddd">
            <GridLayout rows="*" columns="15, *" tap="{{ onUpdatesTap }}">
              <Label col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
              <Label col="1" text="Updates" class="settings-label" textWrap="true" />
            </GridLayout>
          </RL:Ripple>
          <RL:Ripple row="3" rippleColor="#ddd">
            <GridLayout rows="*" columns="15, *" tap="{{ onTrainingTap }}">
              <Label col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
              <Label col="1" text="Training" class="settings-label" textWrap="true" />
            </GridLayout>
          </RL:Ripple>
        </wol:WearOsLayout>
      </pager:PagerItem>
    </pager:Pager>                                      

    // Settings Layout "Page" -- need to wrap this in a component
    <sdl:SwipeDismissLayout row="0" rowSpan="2" col="0" loaded="{{ onSettingsLayoutLoaded }}" class="page" translateX="500" visibility="{{ isSettingsLayoutEnabled ? 'visible' : 'collapsed' }}">
      <wol:WearOsLayout height="100%" width="100%">
        <RL:Ripple row="0" rippleColor="#ddd">
          <GridLayout rows="*" columns="15, *" id="maxSpeed" tap="{{ onChangeSettingsItemTap }}">
            <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
            <Label row="0" col="1" text="Max Speed" class="settings-label" textWrap="true" />
          </GridLayout>
        </RL:Ripple>
        <RL:Ripple row="1" rippleColor="#ddd">
          <GridLayout rows="*" columns="15, *" id="acceleration" tap="{{ onChangeSettingsItemTap }}">
            <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
            <Label row="0" col="1" text="Acceleration" class="settings-label" textWrap="true" />
          </GridLayout>
        </RL:Ripple>
        <RL:Ripple row="2" rippleColor="#ddd">
          <GridLayout rows="*" columns="15, *" id="tapSensitivity" tap="{{ onChangeSettingsItemTap }}">
            <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
            <Label row="0" col="1" text="Tap Sensitivity" class="settings-label" textWrap="true" />
          </GridLayout>
        </RL:Ripple>
        <RL:Ripple row="3" rippleColor="#ddd">
          <GridLayout rows="*" columns="15, *" id="controlMode" tap="{{ onChangeSettingsItemTap }}">
            <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
            <Label row="0" col="1" text="Control Mode" class="settings-label" textWrap="true" />
          </GridLayout>
        </RL:Ripple>
        <RL:Ripple row="4" rippleColor="#ddd">
          <GridLayout rows="*" columns="15, *" id="units" tap="{{ onChangeSettingsItemTap }}">
            <Label row="0" col="0" text="&#xf21b;" class="bullet-list-icon" textWrap="true" />
            <Label row="0" col="1" text="Units" class="settings-label" textWrap="true" />
          </GridLayout>
        </RL:Ripple>
      </wol:WearOsLayout>
    </sdl:SwipeDismissLayout>

    // Settings Layout "Page" -- need to wrap this in a component
    <sdl:SwipeDismissLayout id="changeSettingsPage" row="0" rowSpan="2" col="0" loaded="{{ onChangeSettingsLayoutLoaded }}" class="page" translateX="500" visibility="{{ isChangeSettingsLayoutEnabled ? 'visible' : 'collapsed' }}">
      <GridLayout rows="auto, *, auto" columns="auto, *, auto" width="100%" height="100%">     
        // Increase the config value
        <RL:Ripple row="0" col="1" rippleColor="#ddd" class="increase-btn">
          <StackLayout tap="{{ onIncreaseSettingsTap }}">
            <Label text="&#xf126;" fontSize="36" />
          </StackLayout>
        </RL:Ripple>
        // Cancel Button - closes the layout
        <RL:Ripple row="1" col="0" rippleColor="#ddd" class="cancel-btn">
          <StackLayout tap="{{ onCancelChangesTap }}">
            <Label text="&#xf404;" fontSize="42" />
          </StackLayout>
        </RL:Ripple>
        <StackLayout row="1" col="1" class="value-circle">
          <Label text="{{ changeSettingKeyString }}" class="changeSettingsTitle" textWrap="true" />
          <Label text="{{ changeSettingKeyValue }}" class="changeSettingsValue" textWrap="true" />
        </StackLayout>
        // Confirm button - will save the changes
        <RL:Ripple row="1" col="2" rippleColor="#ddd" class="confirm-btn">
          <StackLayout tap="{{ onConfirmChangesTap }}">
            <Label text="&#xf3fd;" fontSize="42" />
          </StackLayout>
        </RL:Ripple>
        // Decrease the config value
        <RL:Ripple row="2" col="1" rippleColor="#ddd" class="decrease-btn">
          <StackLayout tap="{{ onDecreaseSettingsTap }}">
            <Label text="&#xf123;" fontSize="36" />
          </StackLayout>
        </RL:Ripple>
      </GridLayout>
    </sdl:SwipeDismissLayout>

  </GridLayout>

</Page>
